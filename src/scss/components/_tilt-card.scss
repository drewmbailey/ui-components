:root {
  --bg: hsl(238 22% 10%);
  --panel: hsl(238 22% 14%);
  --text: hsl(0 0% 98%);
  --accent: hsl(266 100% 70%);
}

.tilt-card-section {
  display: flex;
  flex-direction: column;
  flex-wrap: wrap;
  
  &__cards {
    background: radial-gradient(
        1200px 600px at 80% -100px,
        hsl(266 100% 20% / 0.4),
        transparent 60%
      ),
      radial-gradient(
        800px 400px at -20% 120%,
        hsl(200 100% 20% / 0.35),
        transparent 60%
      ),
      var(--bg);
    color: var(--text);
    display: flex;
    font: 16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu,
      "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
    gap: 20px;
    margin: 0;
    padding: clamp(24px, 3vw, 48px);
    place-items: center;

    @media (max-width: 480px) {
      flex-direction: column;
    }
  }

  &__wrapper {
    display: grid;
    gap: clamp(16px, 2vw, 28px);
    grid-template-columns: repeat(auto-fit, minmax(min(320px, 100%), 1fr));
    width: min(1100px, 100%);
  }

  &__demo {
    perspective: 1000px;
  }
}

.tilt-card {
  --rx: 0deg;
  --ry: 0deg;
  --tz: 0px;
  --glow: 0.35;

  background: linear-gradient(180deg, hsl(238 22% 18%), hsl(238 22% 12%));
  border-radius: 20px;
  box-shadow: 0 20px 40px hsl(238 50% 4% / 0.6),
    inset 0 0 0 1px hsl(0 0% 100% / 0.04);
  flex: 1;
  min-height: 220px;
  outline: none;
  padding: 28px;
  position: relative;
  transform: translateZ(var(--tz)) rotateX(var(--rx)) rotateY(var(--ry));
  transform-style: preserve-3d;
  transition: transform 0.25s ease, box-shadow 0.25s ease, background 0.35s ease;

  &::before {
    background: radial-gradient(
        600px 200px at 0% -10%,
        hsl(0 0% 100% / 0.12),
        transparent 60%
      ),
      radial-gradient(
        400px 160px at 120% 110%,
        hsl(0 0% 100% / 0.06),
        transparent 60%
      );
    border-radius: inherit;
    content: "";
    filter: saturate(calc(1 + var(--glow)));
    inset: 0;
    mix-blend-mode: screen;
    pointer-events: none;
    position: absolute;
    transform: translateZ(1px);
  }

  &::after {
    border-radius: inherit;
    box-shadow: inset 0 0 80px hsl(266 100% 60% / calc(0.15 * var(--glow)));
    content: "";
    inset: 0;
    pointer-events: none;
    position: absolute;
    transform: translateZ(2px);
  }

  &__title {
    font-weight: 700;
    letter-spacing: 0.3px;
    margin: 8px 0 8px;
  }

  &__text {
    color: hsl(0 0% 90% / 0.8);
    margin: 0;
  }

  &__tag {
    background: hsl(266 100% 64% / 0.14);
    border: 1px solid hsl(266 100% 70% / 0.25);
    border-radius: 100px;
    color: hsl(266 100% 80%);
    display: inline-block;
    font-size: 0.8rem;
    letter-spacing: 0.02em;
    padding: 0.25rem 0.6rem;
    transform: translateZ(8px);
  }

  &__zones {
    border-radius: inherit;
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    grid-template-rows: repeat(3, 1fr);
    inset: 0;
    overflow: hidden;
    position: absolute;
    transform: translateZ(3px);
  }

  &__zone {
    block-size: 100%;
    inline-size: 100%;

    &:where(:hover) {
      cursor: pointer;
    }
  }

  // Simple tilt modifier
  &--simple {
    &:hover,
    &:focus-visible {
      --rx: 10deg;
      --ry: -10deg;
      --tz: 10px;
      --glow: 0.9;
      background: linear-gradient(180deg, hsl(250 30% 22%), hsl(240 30% 12%));
      box-shadow: 0 30px 60px hsl(260 80% 40% / 0.25),
        0 10px 20px hsl(260 100% 60% / 0.25), inset 0 0 0 1px hsl(0 0% 100% / 0.06);
    }
  }

  // Advanced tilt modifier
  &--advanced {
    --rx: 0deg;
    --ry: 0deg;
    --tz: 0px;
    --glow: 0.5;

    &:hover {
      --tz: 8px;
      --glow: 0.9;
    }

    &:has(.tilt-card__zone--top-left:hover) {
      --rx: 10deg;
      --ry: -10deg;
      box-shadow: 0 30px 60px hsl(260 80% 40% / 0.25),
        0 10px 20px hsl(260 100% 60% / 0.25), 
        inset 0 0 0 1px hsl(0 0% 100% / 0.06);
    }

    &:has(.tilt-card__zone--top-center:hover) {
      --rx: 10deg;
      --ry: 0deg;
      box-shadow: 0 30px 60px hsl(260 80% 40% / 0.25),
        0 10px 20px hsl(260 100% 60% / 0.25), 
        inset 0 0 0 1px hsl(0 0% 100% / 0.06);
    }

    &:has(.tilt-card__zone--top-right:hover) {
      --rx: 10deg;
      --ry: 10deg;
      box-shadow: 0 30px 60px hsl(260 80% 40% / 0.25),
        10px 10px 20px hsl(260 100% 60% / 0.25), 
        inset 0 0 0 1px hsl(0 0% 100% / 0.06);
    }

    &:has(.tilt-card__zone--middle-left:hover) {
      --rx: 0deg;
      --ry: -10deg;
      box-shadow: 0 30px 60px hsl(260 80% 40% / 0.25),
        -10px 10px 20px hsl(260 100% 60% / 0.25), 
        inset 0 0 0 1px hsl(0 0% 100% / 0.06);
    }

    &:has(.tilt-card__zone--middle-center:hover) {
      --rx: 0deg;
      --ry: 0deg;
      box-shadow: 0 30px 60px hsl(260 80% 40% / 0.25),
        0 10px 20px hsl(260 100% 60% / 0.25), 
        inset 0 0 0 1px hsl(0 0% 100% / 0.06);
    }

    &:has(.tilt-card__zone--middle-right:hover) {
      --rx: 0deg;
      --ry: 10deg;
      box-shadow: 0 30px 60px hsl(260 80% 40% / 0.25),
        10px 10px 20px hsl(260 100% 60% / 0.25), 
        inset 0 0 0 1px hsl(0 0% 100% / 0.06);
    }

    &:has(.tilt-card__zone--bottom-left:hover) {
      --rx: -10deg;
      --ry: -10deg;
      box-shadow: 0 20px 40px hsl(260 80% 40% / 0.25),
        -10px 0px 20px hsl(260 100% 60% / 0.25), 
        inset 0 0 0 1px hsl(0 0% 100% / 0.06);
    }

    &:has(.tilt-card__zone--bottom-center:hover) {
      --rx: -10deg;
      --ry: 0deg;
      box-shadow: 0 20px 40px hsl(260 80% 40% / 0.25),
        0 0px 20px hsl(260 100% 60% / 0.25), 
        inset 0 0 0 1px hsl(0 0% 100% / 0.06);
    }

    &:has(.tilt-card__zone--bottom-right:hover) {
      --rx: -10deg;
      --ry: 10deg;
      box-shadow: 0 20px 40px hsl(260 80% 40% / 0.25),
        10px 0px 20px hsl(260 100% 60% / 0.25), 
        inset 0 0 0 1px hsl(0 0% 100% / 0.06);
    }

    &:has(.tilt-card__zone--top-left:hover)::before {
      background: radial-gradient(
          600px 200px at 0% -10%,
          hsl(0 0% 100% / 0.2),
          transparent 60%
        ),
        radial-gradient(
          400px 160px at 120% 110%,
          hsl(0 0% 100% / 0.04),
          transparent 60%
        );
    }
  }

  &:focus-visible {
    outline: 3px solid hsl(266 100% 70% / 0.65);
    outline-offset: 3px;
  }
}

@media (prefers-reduced-motion: reduce) {
  .tilt-card {
    transform: none !important;
    transition: none;

    &__zones {
      display: none;
    }
  }
}
